/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var aa=this||self;function ba(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function f(a,b){a=a.split(".");var c=aa;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}
function ca(a,b){function c(){}c.prototype=b.prototype;a.mb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.hb=function(d,e,g){for(var n=Array(arguments.length-2),m=2;m<arguments.length;m++)n[m-2]=arguments[m];return b.prototype[e].apply(d,n)}};function da(a,b=`unexpected value ${a}!`){throw Error(b);};function ea(a){return new fa(Array.from(a))}function ha(a){const b=a.size()-1;let c=-1;return{next:()=>{c++;if(b!==a.size()-1)throw Error("Underlying data changed during iteration");const d=c>b;return{value:d?null:a.get(c),done:d}}}}var ia=class{[Symbol.iterator](){return ha(this)}};function h(a){return Array.from(a.g)}var fa=class extends ia{constructor(a){super();this.g=a}get(a){return this.g[a]}size(){return this.g.length}map(a){return new fa(this.g.map(a))}};const ja=new fa([]);function ka(a){switch(a){case 12:case 9:case 11:return 2;case 10:return 3;case 1:case 6:case 16:return 1;case 2:case 7:case 15:return 5;case 3:case 4:case 5:case 8:case 13:case 14:case 17:case 18:return 0;default:da(a,"fieldType had an unknown case")}}function la(a,b){if(2!==b)return!1;switch(a){case 12:case 9:case 11:case 10:return!1;case 1:case 6:case 16:case 2:case 7:case 15:case 3:case 4:case 5:case 8:case 13:case 14:case 17:case 18:return!0;default:da(a,"fieldType had an unknown case")}}
function ma(a){var b;let c=void 0;if(a.A&&a.type){const d=a.A;switch(a.type){case 11:case 10:d instanceof ia?c=d.map(e=>e.clone()):c=d.clone();break;case 12:case 6:case 16:case 3:case 4:case 18:case 1:case 2:case 7:case 15:case 5:case 8:case 13:case 14:case 17:case 9:c=d;break;default:da(a.type,"field.type had an unknown case")}}return{pa:a.pa,I:null===(b=a.I)||void 0===b?void 0:b.slice(),A:c,type:a.type}};function na(a){if(Error.captureStackTrace)Error.captureStackTrace(this,na);else{const b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}ca(na,Error);na.prototype.name="CustomError";function oa(a,b){a=a.split("%s");for(var c="",d=a.length-1,e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:"%s");na.call(this,c+a[d])}ca(oa,na);oa.prototype.name="AssertionError";var pa=null;function qa(){var a=(void 0).length,b=3*a/4;b%3?b=Math.floor(b):-1!="=.".indexOf((void 0)[a-1])&&(b=-1!="=.".indexOf((void 0)[a-2])?b-2:b-1);var c=new Uint8Array(b),d=0;ra(function(e){c[d++]=e});return c.subarray(0,d)}
function ra(a){function b(m){for(;c<(void 0).length;){var q=(void 0).charAt(c++),r=pa[q];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(q))throw Error("Unknown base64 encoding at char: "+q);}return m}sa();for(var c=0;;){var d=b(-1),e=b(0),g=b(64),n=b(64);if(64===n&&-1===d)break;a(d<<2|e>>4);64!=g&&(a(e<<4&240|g>>2),64!=n&&a(g<<6&192|n))}}
function sa(){if(!pa){pa={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),b=["+/=","+/","-_=","-_.","-_"],c=0;5>c;c++)for(var d=a.concat(b[c].split("")),e=0;e<d.length;e++){var g=d[e];void 0===pa[g]&&(pa[g]=e)}}};function ta(a,b){if(a===b)return!0;if(a.byteLength!==b.byteLength)return!1;for(let c=0;c<a.byteLength;c++)if(a[c]!==b[c])return!1;return!0}function ua(a,b,c){if(a.slice){const d=a.slice(b,c);if(0!==d.byteLength||b===c)return d}a=new Uint8Array(a,b,(null==c?a.byteLength:c)-b);return(new Uint8Array(a)).buffer};function va(a){return new wa(new Uint8Array(ua(a,0,void 0)))}function xa(a){return a.g?a.g:a.g=qa()}function k(a){a=xa(a);return ua(a.buffer,a.byteOffset,a.byteOffset+a.byteLength)}var wa=class{constructor(a){this.g=a}O(a){return this===a?!0:a instanceof wa?ta(xa(this),xa(a)):!1}},ya=new wa(new Uint8Array(0));function za(a){if(0<a)var b=new Aa(a,a/4294967296);else 0>a?(b=-a,a=~(-a/4294967296),b?b=~b+1:a+=1,b=new Aa(b,a)):b=Ba;return b}function l(a){return 4294967296*a.g+(a.h>>>0)}class Aa{constructor(a,b){this.h=a|0;this.g=b|0}O(a){return this===a?!0:a instanceof Aa?this.h===a.h&&this.g===a.g:!1}}const Ba=new Aa(0,0);function Ca(a,b){a.g.forEach((c,d)=>{c&&b(c,d+1)});if(a.map)for(const [c,d]of Object.entries(a.map))b(d,Number(c))}
var Da=class{constructor(a=24){this.map=void 0;this.g=Array(a)}clone(){const a=new Da(this.g.length);Ca(this,(b,c)=>{a.set(c,ma(b))});return a}set(a,b){a<=this.g.length?this.g[a-1]=b:(this.map||(this.map={}),this.map[a]=b)}get(a){return a<=this.g.length?this.g[a-1]:this.map?this.map[a]:void 0}*[Symbol.iterator](){for(const [a,b]of this.g.entries()){const c=a,d=b;d&&(yield[c+1,d])}if(this.map)for(const [a,b]of Object.entries(this.map))yield[Number(a),b]}};let Ea=void 0;function Fa(a){const b={read:[],write:[],repeated:[],packed:[]};Ca(a,(c,d)=>{if(void 0!==c.I)b.read.push(d);else if(c.A instanceof fa){const e=Ga(c);e&&(la(c.type,c.pa)?b.packed.push({fieldNumber:d,type:c.type,value:e.g}):b.repeated.push({fieldNumber:d,type:c.type,value:h(e)}))}else b.write.push({fieldNumber:d,type:c.type,value:Ha(c)})});return b}
function Ha(a){const b=a.A;switch(a.type){case 4:case 3:case 18:case 6:case 16:return[b.h,b.g];case 12:return xa(b);case 11:case 10:return b.j();default:return b}}function Ga(a){const b=a.A;switch(a.type){case 4:case 3:case 18:case 6:case 16:return b.map(c=>[c.h,c.g]);case 12:return b.map(c=>xa(c));case 11:case 10:return b.map(c=>c.j());default:return b}};function p(a){return new Ia(new Uint8Array([]),new Da(a))}function v(a,b){var c=bkGetIdx(1,a);b=new Da(b);for(var d=0;d<c.fields.length;){var e=c.fields[d++],g=e>>>3;e&=7;var n=c.fields[d++];b.set(g,{pa:e,I:[n]})}for(d=0;d<c.repeated.length;){e=c.repeated[d++];g=e>>>3;e&=7;n=c.repeated[d++];const m=[];for(let q=0;q<n;q++)m.push(c.repeated[d++]);b.set(g,{pa:e,I:m})}return new Ia(a,b)}function w(a,b){return void 0!==a.fields.get(b)}function x(a,b,c,d){a.fields.set(b,{pa:ka(d),A:c,type:d})}
function y(a,b,c,d){b=a.fields.get(b);if(void 0===b)return c;if(void 0!==b.A)return b.A;a=bkGet(1,a.buffer,b.I[b.I.length-1],d);b.A=a;b.type=d;return a}function z(a,b,c){var d=Ba;b=a.fields.get(b);if(void 0===b)return d;if(void 0!==b.A)return b.A;a=bkGet(1,a.buffer,b.I[b.I.length-1],c);const [e,g]=a;a=new Aa(e,g);b.A=a;b.type=c;return a}function Ja(a,b,c){c=bkGet(1,a.buffer,b,c);const d=c&15;return a.buffer.subarray(b+d,b+d+(c>>4))}
function A(a,b,c=ya){b=a.fields.get(b);if(void 0===b)return c;if(void 0!==b.A)return b.A;a=Ja(a,b.I[b.I.length-1],12);a=new wa(a);b.A=a;b.type=12;return a}function B(a,b,c,d){var e=a.fields.get(b);void 0===e?(c=c(p(d)),x(a,b,c,11),a=c):void 0!==e.A?a=e.A:(e=Ja(a,e.I[e.I.length-1],11),c=c(v(e,d)),x(a,b,c,11),a=c);return a}
function C(a,b,c,d){b=a.fields.get(b);if(void 0===b)a=ja;else if(void 0!==b.A)a=b.A;else{var e=[];for(const n of b.I){var g=Ja(a,n,11);g=c(v(g,d));e.push(g)}a=new fa(e);b.A=a;b.type=11}return a}var Ia=class{constructor(a,b){this.buffer=a;this.fields=b;Ea||(Ea=bkGetVersion())}clone(){return new Ia(this.buffer,this.fields.clone())}j(){const a=Fa(this.fields);return bkSerialize(1,this.buffer,a)}};var E=class{constructor(a){this.g=a}j(){return this.g.j()}clone(){return this.create(this.g.clone())}};function Ka(a){a&&"function"==typeof a.Ea&&a.Ea()};function La(){this.C=this.C;this.i=this.i}La.prototype.C=!1;La.prototype.Ea=function(){if(!this.C&&(this.C=!0,this.i))for(;this.i.length;)this.i.shift()()};function Ma(a,b){a.C?b():(a.i||(a.i=[]),a.i.push(b))};var Na=class extends E{create(a){return new Na(a)}get h(){return z(this.g,28,3)}set h(a){x(this.g,28,a,3)}get i(){return y(this.g,40,0,5)}set i(a){x(this.g,40,a,5)}get Ya(){return z(this.g,41,3)}set Ya(a){x(this.g,41,a,3)}get Xa(){return z(this.g,42,3)}set Xa(a){x(this.g,42,a,3)}};function Oa(a){return new F(v(a,3))}var F=class extends E{create(a){return new F(a)}get v(){return y(this.g,1,0,5)}set v(a){x(this.g,1,a,5)}get H(){return z(this.g,2,4)}set H(a){x(this.g,2,a,4)}get D(){return y(this.g,3,"",9)}set D(a){x(this.g,3,a,9)}};var Pa=class extends E{create(a){return new Pa(a)}get m(){return B(this.g,2,a=>new F(a),3)}set m(a){x(this.g,2,a,11)}get h(){return z(this.g,4,3)}set h(a){x(this.g,4,a,3)}};var Qa=class extends E{create(a){return new Qa(a)}get h(){return y(this.g,1,0,13)}set h(a){x(this.g,1,a,13)}get v(){return y(this.g,3,0,5)}set v(a){x(this.g,3,a,5)}get H(){return z(this.g,4,4)}set H(a){x(this.g,4,a,4)}get D(){return y(this.g,5,"",9)}set D(a){x(this.g,5,a,9)}get o(){return z(this.g,6,3)}set o(a){x(this.g,6,a,3)}get i(){return y(this.g,8,!1,8)}set i(a){x(this.g,8,a,8)}get l(){return z(this.g,9,3)}set l(a){x(this.g,9,a,3)}get M(){return z(this.g,11,3)}set M(a){x(this.g,11,a,3)}get u(){return z(this.g,
12,3)}set u(a){x(this.g,12,a,3)}get m(){return B(this.g,13,a=>new F(a),3)}set m(a){x(this.g,13,a,11)}};var Ra=class extends E{create(a){return new Ra(a)}get h(){return y(this.g,1,"",9)}set h(a){x(this.g,1,a,9)}};var Sa=class extends E{create(a){return new Sa(a)}get m(){return B(this.g,1,a=>new F(a),3)}set m(a){x(this.g,1,a,11)}get i(){return z(this.g,2,3)}set i(a){x(this.g,2,a,3)}get h(){return z(this.g,3,3)}set h(a){x(this.g,3,a,3)}},Ta=class extends E{create(a){return new Ta(a)}get h(){return B(this.g,1,a=>new Na(a),12)}set h(a){x(this.g,1,a,11)}get i(){return C(this.g,2,a=>new F(a),3)}set i(a){x(this.g,2,a,11)}get Da(){return C(this.g,3,a=>new Sa(a),6)}set Da(a){x(this.g,3,a,11)}get xa(){return A(this.g,
5,void 0)}set xa(a){x(this.g,5,a,12)}get l(){return C(this.g,16,a=>new F(a),3)}set l(a){x(this.g,16,a,11)}get u(){return C(this.g,17,a=>new F(a),3)}set u(a){x(this.g,17,a,11)}get o(){return C(this.g,18,a=>new F(a),3)}set o(a){x(this.g,18,a,11)}};var Ua=class extends E{create(a){return new Ua(a)}get h(){return y(this.g,1,0,5)}set h(a){x(this.g,1,a,5)}get i(){return y(this.g,2,0,5)}set i(a){x(this.g,2,a,5)}get o(){return y(this.g,3,0,5)}set o(a){x(this.g,3,a,5)}get l(){return y(this.g,4,0,5)}set l(a){x(this.g,4,a,5)}};var Va=class extends E{create(a){return new Va(a)}get xa(){return A(this.g,4,void 0)}set xa(a){x(this.g,4,a,12)}},Wa=class extends E{create(a){return new Wa(a)}get h(){return y(this.g,1,!1,8)}set h(a){x(this.g,1,a,8)}get i(){return B(this.g,2,a=>new Ua(a),8)}set i(a){x(this.g,2,a,11)}},Xa=class extends E{create(a){return new Xa(a)}get i(){return B(this.g,2,a=>new Va(a),5)}set i(a){x(this.g,2,a,11)}get h(){return B(this.g,10,a=>new Wa(a),3)}set h(a){x(this.g,10,a,11)}};var Ya=class extends E{create(a){return new Ya(a)}get v(){return y(this.g,1,0,5)}set v(a){x(this.g,1,a,5)}get url(){return y(this.g,2,"",9)}set url(a){x(this.g,2,a,9)}get mimeType(){return y(this.g,5,"",9)}set mimeType(a){x(this.g,5,a,9)}get bitrate(){return y(this.g,6,0,5)}set bitrate(a){x(this.g,6,a,5)}get width(){return y(this.g,7,0,5)}set width(a){x(this.g,7,a,5)}get height(){return y(this.g,8,0,5)}set height(a){x(this.g,8,a,5)}get i(){return B(this.g,9,a=>new Za(a),4)}set i(a){x(this.g,9,a,11)}get h(){return B(this.g,
10,a=>new Za(a),4)}set h(a){x(this.g,10,a,11)}get lastModified(){return z(this.g,11,3)}set lastModified(a){x(this.g,11,a,3)}get quality(){return y(this.g,16,"",9)}set quality(a){x(this.g,16,a,9)}get D(){return y(this.g,23,"",9)}set D(a){x(this.g,23,a,9)}get type(){return y(this.g,41,0,14)}set type(a){x(this.g,41,a,14)}},Za=class extends E{create(a){return new Za(a)}get start(){return z(this.g,3,3)}set start(a){x(this.g,3,a,3)}get end(){return z(this.g,4,3)}set end(a){x(this.g,4,a,3)}};var $a=class extends E{create(a){return new $a(a)}};var ab=class extends E{create(a){return new ab(a)}};var bb=class extends E{create(a){return new bb(a)}get h(){return B(this.g,215771584,a=>new Xa(a),12)}set h(a){x(this.g,215771584,a,11)}};var cb=class extends E{create(a){return new cb(a)}get h(){return C(this.g,3,a=>new Ya(a),12)}set h(a){x(this.g,3,a,11)}get aspectRatio(){return y(this.g,13,0,2)}set aspectRatio(a){x(this.g,13,a,2)}get i(){return y(this.g,15,"",9)}set i(a){x(this.g,15,a,9)}};var db=class extends E{create(a){return new db(a)}},eb=class extends E{create(a){return new eb(a)}get h(){return y(this.g,1,0,1)}set h(a){x(this.g,1,a,1)}};var fb=class extends E{create(a){return new fb(a)}},gb=class extends E{create(a){return new gb(a)}get h(){return B(this.g,1,a=>new Na(a),12)}set h(a){x(this.g,1,a,11)}},hb=class extends E{create(a){return new hb(a)}get h(){return y(this.g,1,1,14)}set h(a){x(this.g,1,a,14)}},ib=class extends E{create(a){return new ib(a)}},jb=class extends E{create(a){return new jb(a)}get key(){return y(this.g,1,"",9)}set key(a){x(this.g,1,a,9)}get value(){return y(this.g,2,"",9)}set value(a){x(this.g,2,a,9)}},kb=class extends E{create(a){return new kb(a)}};var lb=class extends E{create(a){return new lb(a)}get h(){return y(this.g,1,"",9)}set h(a){x(this.g,1,a,9)}get na(){return y(this.g,2,0,1)}set na(a){x(this.g,2,a,1)}get Ja(){return y(this.g,3,0,1)}set Ja(a){x(this.g,3,a,1)}get s(){return y(this.g,4,"",9)}set s(a){x(this.g,4,a,9)}get o(){return y(this.g,19,"",9)}set o(a){x(this.g,19,a,9)}get i(){return B(this.g,17,a=>new ab(a),0)}set i(a){x(this.g,17,a,11)}get N(){return B(this.g,5,a=>new bb(a),12)}set N(a){x(this.g,5,a,11)}get l(){return B(this.g,
6,a=>new cb(a),12)}set l(a){x(this.g,6,a,11)}get Sa(){return y(this.g,7,!1,8)}set Sa(a){x(this.g,7,a,8)}get oa(){return y(this.g,8,"",9)}set oa(a){x(this.g,8,a,9)}get ya(){return A(this.g,10,void 0)}set ya(a){x(this.g,10,a,12)}get za(){return A(this.g,11,void 0)}set za(a){x(this.g,11,a,12)}get Aa(){return A(this.g,18,void 0)}set Aa(a){x(this.g,18,a,12)}get Ba(){return y(this.g,12,!1,8)}set Ba(a){x(this.g,12,a,8)}get ca(){return C(this.g,13,a=>new F(a),3)}set ca(a){x(this.g,13,a,11)}get u(){return C(this.g,
14,a=>new F(a),3)}set u(a){x(this.g,14,a,11)}get M(){return C(this.g,15,a=>new F(a),3)}set M(a){x(this.g,15,a,11)}},mb=class extends E{create(a){return new mb(a)}},nb=class extends E{create(a){return new nb(a)}get i(){return A(this.g,1,void 0)}set i(a){x(this.g,1,a,12)}get h(){return B(this.g,2,a=>new $a(a),1)}set h(a){x(this.g,2,a,11)}get l(){return A(this.g,3,void 0)}set l(a){x(this.g,3,a,12)}},ob=class extends E{create(a){return new ob(a)}},pb=class extends E{create(a){return new pb(a)}},qb=class extends E{create(a){return new qb(a)}},
rb=class extends E{create(a){return new rb(a)}get h(){return y(this.g,1,"",9)}set h(a){x(this.g,1,a,9)}},sb=class extends E{create(a){return new sb(a)}},tb=class extends E{create(a){return new tb(a)}},ub=class extends E{create(a){return new ub(a)}},vb=class extends E{create(a){return new vb(a)}get h(){return y(this.g,1,0,1)}set h(a){x(this.g,1,a,1)}},wb=class extends E{create(a){return new wb(a)}},xb=class extends E{create(a){return new xb(a)}get s(){return y(this.g,1,"",9)}set s(a){x(this.g,1,a,
9)}get h(){return C(this.g,2,a=>new F(a),3)}set h(a){x(this.g,2,a,11)}},yb=class extends E{create(a){return new yb(a)}},zb=class extends E{create(a){return new zb(a)}get s(){return y(this.g,1,"",9)}set s(a){x(this.g,1,a,9)}get h(){return C(this.g,2,a=>new F(a),3)}set h(a){x(this.g,2,a,11)}},Ab=class extends E{create(a){return new Ab(a)}},Bb=class extends E{create(a){return new Bb(a)}get i(){return y(this.g,1,"",9)}set i(a){x(this.g,1,a,9)}get h(){return y(this.g,2,0,1)}set h(a){x(this.g,2,a,1)}},
Cb=class extends E{create(a){return new Cb(a)}};var Db=class extends E{create(a){return new Db(a)}get h(){return y(this.g,1,"",9)}set h(a){x(this.g,1,a,9)}},Eb=class extends E{create(a){return new Eb(a)}},Fb=class extends E{create(a){return new Fb(a)}get m(){return B(this.g,1,a=>new F(a),3)}set m(a){x(this.g,1,a,11)}get mimeType(){return y(this.g,2,"",9)}set mimeType(a){x(this.g,2,a,9)}get data(){return A(this.g,3,void 0)}set data(a){x(this.g,3,a,12)}get byteOffset(){return y(this.g,4,0,15)}set byteOffset(a){x(this.g,4,a,15)}get h(){return y(this.g,
5,0,15)}set h(a){x(this.g,5,a,15)}},Gb=class extends E{create(a){return new Gb(a)}},Hb=class extends E{create(a){return new Hb(a)}get m(){return B(this.g,1,a=>new F(a),3)}set m(a){x(this.g,1,a,11)}},Ib=class extends E{create(a){return new Ib(a)}};var Jb=class extends E{create(a){return new Jb(a)}get m(){return B(this.g,1,a=>new F(a),3)}set m(a){x(this.g,1,a,11)}get h(){return y(this.g,2,0,1)}set h(a){x(this.g,2,a,1)}get i(){return y(this.g,3,0,1)}set i(a){x(this.g,3,a,1)}},Kb=class extends E{create(a){return new Kb(a)}},Lb=class extends E{create(a){return new Lb(a)}},Mb=class extends E{create(a){return new Mb(a)}};var Nb=class extends E{create(a){return new Nb(a)}get h(){return y(this.g,1,0,1)}set h(a){x(this.g,1,a,1)}},Ob=class extends E{create(a){return new Ob(a)}get h(){var a=this.g;var b=a.fields.get(1);if(void 0===b)b=ja;else if(void 0!==b.A)b=b.A;else{var c=[];if(la(14,b.pa))for(var d of b.I){var e=bkGetPacked(1,a.buffer,d,14);c.push(...e)}else for(e of b.I)d=bkGet(1,a.buffer,e,14),c.push(d);a=new fa(c);b.A=a;b.type=14;b=a}return b}set h(a){x(this.g,1,a,14)}},Pb=class extends E{create(a){return new Pb(a)}get h(){return y(this.g,
1,1,14)}set h(a){x(this.g,1,a,14)}},Qb=class extends E{create(a){return new Qb(a)}get h(){return y(this.g,1,!1,8)}set h(a){x(this.g,1,a,8)}},Rb=class extends E{create(a){return new Rb(a)}get h(){return y(this.g,1,1,14)}set h(a){x(this.g,1,a,14)}get i(){return B(this.g,2,a=>new Sb(a),3)}set i(a){x(this.g,2,a,11)}},Tb=class extends E{create(a){return new Tb(a)}get h(){return C(this.g,1,a=>new Sb(a),3)}set h(a){x(this.g,1,a,11)}},Sb=class extends E{create(a){return new Sb(a)}get m(){return B(this.g,
1,a=>new F(a),3)}set m(a){x(this.g,1,a,11)}get na(){return y(this.g,2,0,1)}set na(a){x(this.g,2,a,1)}get La(){return y(this.g,3,0,1)}set La(a){x(this.g,3,a,1)}};var Ub=class extends E{create(a){return new Ub(a)}get name(){return y(this.g,1,"",9)}set name(a){x(this.g,1,a,9)}get value(){return y(this.g,2,"",9)}set value(a){x(this.g,2,a,9)}};var Vb=class extends E{create(a){return new Vb(a)}get s(){return y(this.g,1,"",9)}set s(a){x(this.g,1,a,9)}get h(){return y(this.g,2,0,15)}set h(a){x(this.g,2,a,15)}get url(){return y(this.g,3,"",9)}set url(a){x(this.g,3,a,9)}get l(){return C(this.g,4,a=>new Ub(a),2)}set l(a){x(this.g,4,a,11)}get u(){return A(this.g,5,void 0)}set u(a){x(this.g,5,a,12)}get o(){return y(this.g,6,0,15)}set o(a){x(this.g,6,a,15)}get i(){return y(this.g,7,"",9)}set i(a){x(this.g,7,a,9)}},Wb=class extends E{create(a){return new Wb(a)}},
Xb=class extends E{create(a){return new Xb(a)}},Yb=class extends E{create(a){return new Yb(a)}};var Zb=class extends E{create(a){return new Zb(a)}get data(){return A(this.g,2,void 0)}set data(a){x(this.g,2,a,12)}get offset(){return y(this.g,3,0,15)}set offset(a){x(this.g,3,a,15)}get length(){return y(this.g,4,0,15)}set length(a){x(this.g,4,a,15)}},$b=class extends E{create(a){return new $b(a)}},ac=class extends E{create(a){return new ac(a)}},bc=class extends E{create(a){return new bc(a)}},cc=class extends E{create(a){return new cc(a)}},dc=class extends E{create(a){return new dc(a)}},ec=class extends E{create(a){return new ec(a)}},
fc=class extends E{create(a){return new fc(a)}};var gc=class extends E{create(a){return new gc(a)}get s(){return y(this.g,1,"",9)}set s(a){x(this.g,1,a,9)}get h(){return y(this.g,2,"",9)}set h(a){x(this.g,2,a,9)}},hc=class extends E{create(a){return new hc(a)}get h(){return A(this.g,1,void 0)}set h(a){x(this.g,1,a,12)}},ic=class extends E{create(a){return new ic(a)}get h(){return A(this.g,1,void 0)}set h(a){x(this.g,1,a,12)}},jc=class extends E{create(a){return new jc(a)}};var G=class{constructor(...a){1===a.length?(a=a[0],this.v=a.v,this.D=a.D,this.H=l(a.H),this.h=a):(this.v=a[0],this.D=a[1],this.H=a[2])}get g(){null==this.h&&(this.h=new F(p(3)),this.h.v=this.v,this.h.D=this.D,this.h.H=za(this.H));return this.h}O(a){return a instanceof F?this.v===a.v&&this.D===a.D&&this.H===l(a.H):this.v===a.v&&this.D===a.D&&this.H===a.H}};var kc=class{constructor(a){this.g=a;this.m=new G(a.v,a.D,l(a.lastModified))}get h(){return w(this.g.g,9)?{first:l(this.g.i.start),Na:l(this.g.i.end)}:void 0}get i(){return w(this.g.g,10)?{first:l(this.g.h.start),Na:l(this.g.h.end)}:void 0}get mimeType(){return this.g.mimeType}O(a){return a instanceof kc?this.m.O(a.m):a instanceof G?this.m.O(a):this.m.O(a)}};var lc=class{constructor(a){this.l=a}get h(){return this.l.h}get i(){return this.h.h}get g(){return this.i.i}get o(){return this.i.h}};function mc(a){a.g={};for(const b of a.h.h){const c=l(b.lastModified);null==a.g[c]&&(a.g[c]=[]);a.g[c].push(b)}}function nc(a,b,c,d){var e;null==a.g&&mc(a);return null===(e=a.g[d])||void 0===e?void 0:e.find(g=>g.v===b&&g.D===c)}var oc=class{constructor(a){this.h=a}};function pc(a){return 128>a?1:192>a?2:224>a?3:240>a?4:5}function qc(a){var b=0;if(0>=a.length-b)return[void 0,b];var c=a[b],d=pc(c);if(a.length-b<d)return[void 0,b];++b;if(1===d)a=c;else if(2===d)a=a[b++],a=(c&63)+64*a;else if(3===d)d=a[b++],a=a[b++],a=(c&31)+32*(d+256*a);else if(4===d){d=a[b++];var e=a[b++];a=a[b++];a=(c&15)+16*(d+256*(e+256*a))}else c=a[b++],d=a[b++],e=a[b++],a=a[b++],a=c+256*(d+256*(e+256*a));return[a,b]}
function rc(a,b,c){if(0===a.g&&0===b.length-c)return[void 0,c];var d=0===a.g?pc(b[c]):pc(a.h[0])-a.g;if(0>=d)throw Error("Data present but parser claims unnecessary");if(b.length-c>=d)return a.h.set(b.subarray(c,c+d),a.g),a.g=0,[a]=qc(a.h),[a,c+d];d=b.length-c;a.h.set(b.subarray(c),a.g);a.g+=d;return[void 0,c+d]}var sc=class{constructor(){this.h=new Uint8Array(5);this.g=0}};function tc(a){return a.buffer.subarray(a.offset,a.offset+a.length)}var uc=class{constructor(a,b,c){this.buffer=a;this.offset=b;this.length=c}};var vc=class{constructor(a){this.l=a;this.g=this.o=this.i=0;this.u=new sc;this.h=0}};var H=class extends Error{constructor(a,b){super(b);this.type=a;Object.setPrototypeOf(this,H.prototype)}};class wc{constructor(a,b){this.J=a;this.o=b;this.h=0}}var xc=class extends wc{constructor(a,b){super(a,b);if(void 0===a.h||void 0===a.i||a.h.Na+1!==a.i.first)throw new H(0,"info.missingInitIndex");if(this.J.h.first!==b)throw new H(3,"info.initStartMismatch");}},yc=class{constructor(a,b,c){this.g=a;this.i=b;this.h=c}},zc=class extends wc{constructor(a,b,c){super(a,b);this.l=c;this.i=0;this.u=!1}};class Dc{log(){}}var I=new Dc;function Ec(){return new H(3,"info.wrongBytePosition")}function Fc(){return new H(3,"info.wrongSequenceNum")}function Gc(a,b){return null==(null===a||void 0===a?void 0:a.g)||null==(null===b||void 0===b?void 0:b.g)?!1:a.g+a.i+.05>=b.g}function Hc(a,b){return a.g.findIndex(c=>null!=c.g&&c.g<=b&&b<c.g+c.i)}function Ic(a,b,c,d){let e=a.l.find(g=>g.J.O(b));if(void 0!==e){if(e.o+e.h!==c)throw Ec();}else e=new xc(b,c),a.l.push(e);e.h+=d}var Jc=class{constructor(a){this.h=a;this.l=[];this.g=[];this.i=!1}};const Kc={};let Lc=0;function Mc(a){const b=(++Lc).toString(32);Kc[b]=a;return`${"mfcReferences"}['${b}']`}f("mfcReferences",Kc);var Nc=class{constructor(a,b,c){this.s=a;this.N=b;this.g=c}};function Oc(a){return w(a.g.g,42)?4:w(a.g.g,28)||a.mimeType.toLowerCase().includes("audio")?1:2};var J=class{constructor(a){this.i=a;this.g=Pc[this.i];this.g||(this.g=native_getMethodIDs(this.i,["initialize","pushMedia","onPushComplete"]),Pc[this.i]=this.g)}B(a){this.h=native_instantiateHandler(this.i,a);return a}G(){native_terminateHandler(this.h);this.h=void 0}K(a){return new Eb(v(native_callMethod(this.g.initialize,this.h,a.j()),0))}S(a){return new Gb(v(native_callMethod(this.g.pushMedia,this.h,a.j()),0))}aa(a){return new Ib(v(native_callMethod(this.g.onPushComplete,this.h,a.j()),0))}};
J.prototype.onPushComplete=J.prototype.aa;J.prototype.pushMedia=J.prototype.S;J.prototype.initialize=J.prototype.K;J.prototype.terminateWrapper=J.prototype.G;J.prototype.setInstance=J.prototype.B;var Pc={};f("MediaParsersNativeWrapper",J);var Rc=class{constructor(a){this.g=new J("com/google/android/libraries/youtube/media/player/scripted/fetch/generated/MediaParsersScriptedHandler");this.g.B(a)}K(a){const b=new Db(p(1));b.h=Mc(new Qc(a));this.g.K(b)}S(a,b,c,d,e){const g=new Fb(p(5));g.m=a.g;g.mimeType=b;g.data=va(tc(c));g.byteOffset=d;g.h=e;this.g.S(g)}aa(){}};class Qc{constructor(a){this.g=a}$(a){this.g.$(new G(a.m),a.h,a.i);return new Kb(p(0))}ra(){return new Mb(p(0))}};var K=class{constructor(a){this.i=a;this.g=Sc[this.i];this.g||(this.g=native_getMethodIDs(this.i,["seek","discardBuffer","discardRange"]),Sc[this.i]=this.g)}B(a){this.h=native_instantiateHandler(this.i,a);return a}G(){native_terminateHandler(this.h);this.h=void 0}seek(a){return new Ob(v(native_callMethod(this.g.seek,this.h,a.j()),1))}U(a){return new Qb(v(native_callMethod(this.g.discardBuffer,this.h,a.j()),1))}ja(a){return new Tb(v(native_callMethod(this.g.discardRange,this.h,a.j()),1))}};
K.prototype.discardRange=K.prototype.ja;K.prototype.discardBuffer=K.prototype.U;K.prototype.seek=K.prototype.seek;K.prototype.terminateWrapper=K.prototype.G;K.prototype.setInstance=K.prototype.B;var Sc={};f("MediaSinkNativeWrapper",K);var Tc=class{constructor(a){this.g=new K("com/google/android/libraries/youtube/media/player/scripted/fetch/generated/MediaSinkScriptedHandler");this.g.B(a)}seek(a){const b=new Nb(p(1));b.h=a;return h(this.g.seek(b).h)}U(a){const b=new Pb(p(1));b.h=a;return this.g.U(b).h}ja(a,b,c,d){const e=new Rb(p(2));e.h=a;a=new Sb(p(3));a.m=b.g;a.na=c;a.La=d;e.i=a;b=this.g.ja(e);c=[];for(const g of b.h)c.push({m:new G(g.m),lb:g.na,duration:g.La});return c}};var L=class{constructor(a){this.h=a;this.g=Uc[this.h];this.g||(this.g=native_getMethodIDs(this.h,["getCurrentPlaybackPositionSeconds"]),Uc[this.h]=this.g)}B(a){this.i=native_instantiateHandler(this.h,a);return a}G(){native_terminateHandler(this.i);this.i=void 0}W(a){return new eb(v(native_callMethod(this.g.getCurrentPlaybackPositionSeconds,this.i,a.j()),1))}};L.prototype.getCurrentPlaybackPositionSeconds=L.prototype.W;L.prototype.terminateWrapper=L.prototype.G;L.prototype.setInstance=L.prototype.B;
var Uc={};f("MediaFetchCallbacksNativeWrapper",L);var M=class{constructor(a){this.i=a;this.g=Vc[this.i];this.g||(this.g=native_getMethodIDs(this.i,["getAbrState","onBufferedToEof","logToCtmp"]),Vc[this.i]=this.g)}B(a){this.h=native_instantiateHandler(this.i,a);return a}G(){native_terminateHandler(this.h);this.h=void 0}V(a){return new gb(v(native_callMethod(this.g.getAbrState,this.h,a.j()),1))}R(a){return new ib(v(native_callMethod(this.g.onBufferedToEof,this.h,a.j()),0))}ka(a){return new kb(v(native_callMethod(this.g.logToCtmp,this.h,a.j()),0))}};
M.prototype.logToCtmp=M.prototype.ka;M.prototype.onBufferedToEof=M.prototype.R;M.prototype.getAbrState=M.prototype.V;M.prototype.terminateWrapper=M.prototype.G;M.prototype.setInstance=M.prototype.B;var Vc={};f("MediaFetchClipCallbacksNativeWrapper",M);var Wc=class{constructor(a){this.g=new L("com/google/android/libraries/youtube/media/player/scripted/fetch/generated/MediaFetchCallbacksScriptedHandler");this.g.B(a)}W(){const a=this.g.W(new db(p(0)));if(w(a.g,1))return a.h}},Xc=class{constructor(a){this.g=new M("com/google/android/libraries/youtube/media/player/scripted/fetch/generated/MediaFetchClipCallbacksScriptedHandler");this.g.B(a)}V(){return this.g.V(new fb(p(0))).h}R(a){const b=new hb(p(1));b.h=a;this.g.R(b)}ka(a,b){const c=new jb(p(2));
c.key=a;c.value=b;this.g.ka(c)}};var N=class{constructor(a){this.h=a;this.g=Yc[this.h];this.g||(this.g=native_getMethodIDs(this.h,["startFetch","cancelFetch"]),Yc[this.h]=this.g)}B(a){this.i=native_instantiateHandler(this.h,a);return a}G(){native_terminateHandler(this.i);this.i=void 0}ga(a){return new Wb(v(native_callMethod(this.g.startFetch,this.i,a.j()),0))}qa(a){return new Yb(v(native_callMethod(this.g.cancelFetch,this.i,a.j()),0))}};N.prototype.cancelFetch=N.prototype.qa;N.prototype.startFetch=N.prototype.ga;
N.prototype.terminateWrapper=N.prototype.G;N.prototype.setInstance=N.prototype.B;var Yc={};f("NetworkClientNativeWrapper",N);let Zc=0;var ad=class{constructor(a){this.g=new N("com/google/android/libraries/youtube/media/player/scripted/fetch/generated/NetworkClientScriptedHandler");this.g.B(a)}ga(a,b,c,d,e,g){const n=new $c(g);g=new Vb(p(7));g.s=a;g.url=b;g.u=va(d);g.o=e;g.h=Zc++;g.i=Mc(n);a=[];for(const [m,q]of c)c=m,b=q,d=new Ub(p(2)),d.name=c,d.value=b.join(","),a.push(d);g.l=ea(a);this.g.ga(g)}cancel(){this.g.qa(new Xb(p(1)))}};
class $c{constructor(a){this.g=a}Z(a){this.g.Z(new Uint8Array(k(a.data)),a.offset,a.length);return new $b(p(0))}la(){return new bc(p(0))}X(){this.g.X();return new dc(p(0))}Y(){this.g.Y(Error("netFailed"));return new fc(p(0))}};var P=class{constructor(a){this.h=a;this.g=bd[this.h];this.g||(this.g=native_getMethodIDs(this.h,["createNetworkClient","releaseNetworkClient"]),bd[this.h]=this.g)}B(a){this.i=native_instantiateHandler(this.h,a);return a}G(){native_terminateHandler(this.i);this.i=void 0}T(a){return new hc(v(native_callMethod(this.g.createNetworkClient,this.i,a.j()),1))}ma(a){return new jc(v(native_callMethod(this.g.releaseNetworkClient,this.i,a.j()),0))}};P.prototype.releaseNetworkClient=P.prototype.ma;
P.prototype.createNetworkClient=P.prototype.T;P.prototype.terminateWrapper=P.prototype.G;P.prototype.setInstance=P.prototype.B;var bd={};f("NetworkClientFactoryNativeWrapper",P);var cd=class{constructor(a){this.g=new P("com/google/android/libraries/youtube/media/player/scripted/fetch/generated/NetworkClientFactoryScriptedHandler");this.g.B(a)}T(a,b){const c=new gc(p(2));c.s=a;c.h=b;return new Uint8Array(k(this.g.T(c).h))}ma(a){const b=new ic(p(1));b.h=va(a);this.g.ma(b)}};function dd(a){if(a.N.o){var b=Date.now()/1E3,c=b,d;if(null===(d=a.P)||void 0===d||!w(d.g,4)||null==a.wa||null!=a.Ia&&a.Ia>a.wa?0:c<a.wa+a.P.l/1E3)a=[];else{c=b;var e;c=(null===(e=a.P)||void 0===e?0:w(e.g,3))&&void 0!==a.ab?c>a.ab+a.P.o/1E3:!1;e=[];if((d=void 0!==a.Ca)&&!(d=c)){d=a.Ca;var g;b=(null===(g=a.P)||void 0===g?0:w(g.g,1))?a.P.h/1E3:w(a.N.g.g,1)?a.N.g.h/1E3:60;d=d<=b}d&&e.push(1);if((g=void 0!==a.Ka)&&!(g=c)){g=a.Ka;var n;a=(null===(n=a.P)||void 0===n?0:w(n.g,2))?a.P.i/1E3:w(a.N.g.g,2)?a.N.g.i/
1E3:60;g=g<=a}g&&e.push(2);a=e}}else n=[],void 0!==a.Ca&&60>a.Ca&&n.push(1),void 0!==a.Ka&&60>a.Ka&&n.push(2),a=n;return a};class ed{constructor(a,b){this.h=a;this.i=b;this.g=void 0;this.l=(c,d,e)=>{if(this.i.Ra.includes(c))this.i.Ha(c,d,e);else if(this.h.Ra.includes(c))if(void 0!==this.g){if(this.g.id!==c)throw Error("Unfinished partial part.");this.g.data.set(tc(d),this.g.position);this.g.position+=d.length;0===e&&(this.h.Ha(c,this.g.data),this.g=void 0)}else 0===e?this.h.Ha(c,d.buffer.slice(d.offset,d.offset+d.length)):(e=new Uint8Array(d.length+e),e.set(tc(d)),this.g={id:c,data:e,position:d.length})};this.o=new vc(this.l)}}
function fd(a,b){if(0<b.length){const c=a.i[a.h];for(const d of a.g)d.Pa&&d.Pa(c,b)}}
var gd=class{constructor(a){this.g=a;this.u=new sc;this.i=[];this.M=(b,c)=>{switch(b){case 20:var d=new Qa(v(c,12));this.i[d.h]=d;for(var e of this.g)e.Va&&e.Va(d);break;case 22:[e]=qc(c);e=this.i[e];for(d of this.g)d.Ua&&d.Ua(e);break;case 43:d=new Ra(v(c,1));for(const g of this.g)g.Wa&&g.Wa(d);break;case 44:v(c,1);for(const g of this.g);break;case 42:d=new Pa(v(c,4));for(const g of this.g)g.Ta&&g.Ta(d);break;case 35:d=new Ua(v(c,8));for(const g of this.g)g.Ga&&g.Ga(d)}};this.l={Ra:[20,22,35,42,
43,44],Ha:this.M};this.ca=(b,c,d)=>{if(21===b){if(null!=this.h)fd(this,c);else{b=void 0;let e=c.offset;[b,e]=rc(this.u,c.buffer,e);if(void 0===b)return;this.h=b;fd(this,new uc(c.buffer,e,c.offset+c.length-e))}0===d&&(this.h=void 0)}};this.o={Ra:[21],Ha:this.ca};this.oa=new ed(this.l,this.o)}};class hd{constructor(a,b,c,d,e,g,n,m,q=new Map){this.h=a;this.g=b;this.s=c;this.url=d;this.Za=e;this.headers=q;this.method="POST";this.startTime=-1;this.l=this.i=this.active=!1;q.set("Content-Type",["application/x-protobuf"]);this.body=e.j();m.push({Ga:r=>{var u;this.l=!0;for(const D of this.g)null===(u=D.Ga)||void 0===u?void 0:u.call(D,this,r)},Pa:()=>{this.i=!0}});this.u=new gd(m);this.o={la:()=>{},Z:(r,u,D)=>{a:{var t=this.u.oa.o;r=r.subarray(u,u+D);for(u=0;u<r.length;)switch(t.h){case 0:[D,u]=
rc(t.u,r,u);if(void 0===D)break a;t.i=D;t.h=1;break;case 1:[D,u]=rc(t.u,r,u);if(void 0===D)break a;t.o=D;t.g=t.o;t.h=2;0===t.g&&(t.l(t.i,new uc(r,0,0),0),t.h=0);break;case 2:if(t.g>r.length-u){t.g-=r.length-u;t.l(t.i,new uc(r,u,r.length-u),t.g);break a}t.l(t.i,new uc(r,u,t.g),0);u+=t.g;t.g=0;t.h=0;break;default:da(t.h,"partState unknown")}}},X:()=>{var r;g();for(const u of this.g)null===(r=u.jb)||void 0===r?void 0:r.call(u,this,this.i,this.l);this.active=!1},Y:r=>{var u;n(r);for(const D of this.g)null===
(u=D.fb)||void 0===u?void 0:u.call(D,this,r);this.active=!1}}}start(){var a;this.startTime=Date.now()/1E3;this.h.ga(this.s,this.url,this.headers,this.body,32768,this.o);for(const b of this.g)null===(a=b.kb)||void 0===a?void 0:a.call(b,this);this.active=!0}cancel(){var a;if(this.active){this.h.cancel();for(const b of this.g)null===(a=b.ib)||void 0===a?void 0:a.call(b,this);this.active=!1}}}function id(a,b){const c=a.h();return new hd(c,a.g,b.s,b.url,b.Za,b.sa,b.ta,b.gb,b.headers)}
var jd=class{constructor(a,b){this.h=a;this.g=b}};function kd(a){let b=0;for(const c of a)b|=c;return b}function ld(a){var b;null===(b=a.h)||void 0===b?void 0:b.Ea();a.h=void 0}function md(a,b){a=nc(a.g.g,b.v,b.D,l(b.H));if(null!=a)return new kc(a)}function nd(a,b){return a.l.find(c=>b.O(c.m))}
var pd=class extends La{constructor(a,b,c){super();this.g=a;this.u=b;this.F=c;this.l=[];this.o=a.g.h.i;Ma(this,()=>{this.cancel()})}fetch(a,b,c,d,e){if(0!==b.length){if(null!=this.h){if(a.every(g=>this.h.ia.includes(g)))return;this.cancel()}this.h=new od(this,this.F,b,c,d,e);this.h.start()}}cancel(a){if(null!=this.h){var b=!1;if(b=void 0===a?!0:a.some(c=>this.h.ia.includes(c)))I.log(`CPN ${this.g.s}: SABR fetch cancelled.`),ld(this)}}sa(){ld(this);this.F.Oa()}ta(a){ld(this);this.F.Fa(a)}};
function qd(a,b){const c=[],d=[];for(const n of b){var e=Q(a.F,n);b=e.l;e=e.g;for(const m of b)b=m.J,m.o+m.h>m.J.h.Na&&null!=nd(a.client,b)&&c.push(b.m.g);for(const m of e){b=d;e=b.push;var g=m;const q=new Sa(p(6));q.m=g.J.m.g;q.i=za(g.l.i);q.h=g.u?za(g.l.h):za(1E3*g.i);e.call(b,q)}}return{cb:c,Da:d}}
class od extends La{constructor(a,b,c,d,e,g){super();this.client=a;this.F=b;this.ia=c;this.Qa={};b=new Ta(p(9));const n=this.F.Ma();n.i=kd(c);b.h=n;var m=d.get(1);m&&c.includes(1)&&(b.l=ea(m.map(q=>q.g)));(m=d.get(2))&&c.includes(2)&&(b.u=ea(m.map(q=>q.g)));(d=d.get(4))&&c.includes(4)&&(b.o=ea(d.map(q=>q.g)));c=qd(this,c);b.i=ea(c.cb);b.Da=ea(c.Da);b.xa=a.g.N.h.i.xa;b.h.Ya=za(1E3*e);null!=g&&(b.h.Xa=za(1E3*g));this.position=l(n.h)/1E3;this.$a=id(a.u,{sa:this.sa.bind(this),ta:this.ta.bind(this),gb:[this],
url:a.o,Za:b,s:a.g.s});Ma(this,()=>{this.$a.cancel()});I.log(`CPN ${a.g.s}: new SABR fetch, playerTimeMs=${l(n.h)}.`)}start(){this.$a.start()}sa(){this.C||(I.log(`CPN ${this.client.g.s}: SABR fetch completed.`),this.client.sa())}ta(a){this.C||(I.log(`CPN ${this.client.g.s}: SABR fetch failed, e=${a}.`),this.client.ta(a))}Va(a){if(!this.C){I.log(()=>`CPN ${this.client.g.s}: SABR received MediaHeader `+(a.i?`with initindex segment, itag=${a.v}.`:`with media, itag=${a.m.v} sequence=${l(a.l)}.`));var b=
md(this.client,a.m);void 0===b?this.F.Fa(Error("Format not in streamindData")):this.Qa[a.h]={offset:l(a.o),format:b,va:a.i?void 0:new yc(l(a.l),l(a.M),l(a.u))}}}Pa(a,b){if(!this.C){var c=this.Qa[a.h];if(a.i){a=this.F;var d=c.format,e=c.offset;a.C||(a.l[d.m.v]={J:d,offset:e,size:b.length},a.o.S(d.m,d.mimeType,b,e,-1))}else{a=this.F;d=c.format;e=c.va;var g=c.offset;a.C||(a.l[d.m.v]={J:d,offset:g,va:e,size:b.length},a.o.S(d.m,d.mimeType,b,g,e.g))}c.offset+=b.length}}Ua(a){if(!this.C){var b=this.Qa[a.h];
if(a.i)a=this.F,b=b.format,a.C||(a.o.aa(b.m,-1),delete a.l[b.m.v]);else{var c=this.F,d=b.format,e=b.va.g;if(!c.C){c.o.aa(d.m,e);var g=Q(c,d);g=g.g[g.g.length-1];if((null===g||void 0===g?void 0:g.l.g)===e)g.u=!0;else throw Fc();delete c.l[d.m.v]}c=nd(this.client,b.format);if(null===c||void 0===c?0:c.h.O(a.l))a=this.F,b=Oc(b.format),a.C||(c=a.g,Q(a,b).i=!0,a.F.R(c,b))}}}Wa(a){!this.C&&w(a.g,1)&&(this.client.o=a.h)}Ta(a){this.C||this.client.l.push(a)}};function rd(a){return new pd(a.h,a.ya.eb({Ga:(b,c)=>{a.g.P=c;a.g.wa=Date.now()/1E3}}),a)}function sd(a){a.g=void 0;a.l={}}function Q(a,b){b instanceof kc&&(b=Oc(b));return 2===b?a.Aa:a.Ja}function td(a,b,c){c=null!==c&&void 0!==c?c:b.startTime;b={};for(const n of a.ia){a:{var d=Q(a,n);var e=c,g=Hc(d,e);if(0>g){d={duration:0,bb:!1};break a}for(;Gc(d.g[g],d.g[g+1]);)g++;const m=d.g[g];d={duration:m.g+m.i-e,bb:d.i&&g===d.g.length-1}}b[n]=d}return b}function ud(a,b,c){a.M.set(b,c)}
var vd=class extends La{constructor(a,b,c,d,e,g,n,m){super();this.h=a;this.F=b;this.o=c;this.ca=d;this.oa=e;this.ia=g;this.M=n;this.ya=m;this.Ja=new Jc(1);this.Aa=new Jc(2);this.Ba=[];this.l={};this.o.K(this);this.u=rd(this);Ma(this,ba(Ka,this.u));Ma(this,()=>{sd(this)})}get za(){return null!=this.g}$(a,b,c){var d=this.l[a.v];if(null!=d)if(null==d.va)Ic(Q(this,d.J),d.J,d.offset,d.size);else{var e=0>b?void 0:b;a=Q(this,d.J);b=d.J;var g=d.va,n=d.offset;d=d.size;let m=a.g[a.g.length-1];if((null===m||
void 0===m?void 0:m.l.g)===g.g){if(!m.J.O(b))throw c=m.J,c.m.v!==b.m.v?new H(3,"info.wrongItag"):c.m.D!==b.m.D?new H(3,"info.wrongXtags"):c.m.H!==b.m.H?new H(3,"info.wrongLmt"):new H(3,"info.wrongFormat");if(m.o+m.h!==n)throw Ec();}else{if(void 0!==m&&m.l.g!==g.g-1)throw Fc();m=new zc(b,n,g);a.g.push(m)}m.h+=d;m.i+=c;void 0===m.g&&(m.g=e)}}fetch(a,b){this.g=a;this.u.fetch(b,this.ia,this.M,a.startTime,a.endTime)}seek(a,b){I.log(`CPN ${this.h.s}: Seeking to ${b}`);a.Ia=Date.now()/1E3;a=this.ca.seek(b);
for(const c of this.ia)-1!==a.indexOf(c)?I.log(`CPN ${this.h.s}: Buffered seek for ${c} succeeded.`):(I.log(`CPN ${this.h.s}: Buffered seek for ${c} failed, discarding buffer and cancelling any active fetch.`),this.u.cancel([c]),sd(this),this.ca.U(c),b=Q(this,c),I.log(`BufferStateTracker for ${b.h} cleared.`),b.g.length=0,b.i=!1)}Oa(){if(!this.C){var a=this.g;this.g.i=Date.now()/1E3;sd(this);this.F.Oa(a)}}Fa(a){if(!this.C){var b=this.g;sd(this);this.F.Fa(b,a)}}Ma(){return this.F.Ma(this.g)}};var wd=class{constructor(a,b,c,d,e){this.g=a;this.s=b;this.h=c;this.startTime=d;this.endTime=e}};class xd{constructor(){this.h=this.g=this.i=0}}function yd(a,b){let c=a.i.get(b);null==c&&(c=new xd,a.i.set(b,c));return c}
function zd(a,b){if(!a.g.some(d=>d.controller.za))for(let d=0;d<a.g.length;d++){var c=0===d?b:void 0;const e=a.g[d].clip,g=a.g[d].controller,n=td(g,e,c),m=null==e.endTime?Infinity:e.endTime-(null!==c&&void 0!==c?c:e.startTime);if(!Object.values(n).every(q=>q.bb||q.duration>=m)&&(c=dd({N:g.h.N,P:e.P,wa:e.wa,ab:e.i,Ia:e.Ia,Ca:n[1].duration,Ka:n[2].duration}),0<c.length)){g.fetch(e,c);break}}}function Ad(a,b){return a.h.filter(c=>c.h.s===b)}function Bd(a,b){return a.g.find(c=>c.clip.g===b)}
var Cd=class{constructor(a,b){this.o=a;this.u=b;this.g=[];this.h=[];this.i=new Map;p(0);this.l={Ma:c=>c.h.V(),R:(c,d)=>{c.h.R(d)},Oa:c=>{yd(this,c.s).g=0;this.L()},Fa:c=>{const d=yd(this,c.s);d.g++;d.h++;c=yd(this,c.s);50>c.h&&20>c.g&&10>c.i||this.L()}};this.M={fb:c=>{c=yd(this,c.s);c.h++;c.i++}}}ba(a,b,c,d,e,g,n,m,q,r,u,D,t,Id,Jd,Ac,Bc,Cc){I.log(`CPN ${d}: queing new video clip, queueId=${a}.`);const Kd=new ad(this.u.T(d,e));e=this.h.find(O=>O.oa&&O.h.s===d);null==e&&(q=q?[2]:[],null!=r&&q.push(1),
null!=u&&q.push(4),r=new Map,null!=Bc&&r.set(1,Bc.map(O=>new G(O))),null!=Ac&&r.set(2,Ac.map(O=>new G(O))),null!=Cc&&r.set(4,Cc.map(O=>new G(O))),e=new vd(new Nc(d,new lc(n),new oc(m)),this.l,t,Id,Jd,q,r,{eb:O=>new jd(()=>Kd,[this.M,O])}),this.h.push(e));a=new wd(a,d,D,b,c);e.Ba.push(a);this.g.push({clip:a,controller:e});this.L()}seek(a){var b;null===(b=this.g[0])||void 0===b?void 0:b.controller.seek(this.g[0].clip,a);this.L()}ha(a){for(;this.g.length&&this.g[0].clip.g!==a;)this.g.shift();this.g.length&&
this.L()}reset(){for(const a of this.g)a.controller.Ea();this.g.length=0}L(){if(0!==this.g.length){var a=this.o.W();zd(this,a)}}da(a,b){a=Ad(this,a);for(const c of a)ud(c,1,b.map(d=>new G(d)))}ea(a,b){a=Ad(this,a);for(const c of a)ud(c,2,b.map(d=>new G(d)))}fa(a,b){a=Bd(this,a);null!=a&&(a.clip.endTime=b)}};f("MediaFetchController",class{K(a){const b=new Wc(new Uint8Array(k(a.i)));v(a.h.j(),1);a=new cd(new Uint8Array(k(a.l)));this.g=new Cd(b,a);return new ob(p(0))}L(){this.g.L();return new qb(p(0))}ba(a){this.g.ba(a.h,a.na,w(a.g,3)?a.Ja:void 0,a.s,a.o,new ab(v(a.i.j(),0)),new bb(v(a.N.j(),12)),new cb(v(a.l.j(),12)),a.Sa,a.oa,void 0,new Xc(new Uint8Array(k(a.ya))),new Rc(new Uint8Array(k(a.za))),new Tc(new Uint8Array(k(a.Aa))),a.Ba,h(a.ca).map(b=>Oa(b.j())),h(a.u).map(b=>Oa(b.j())),h(a.M).map(b=>Oa(b.j())));
return new mb(p(0))}ua(a){w(a.g,1)&&this.g.seek(a.h);return new wb(p(0))}ha(a){this.g.ha(a.h);return new sb(p(0))}reset(){this.g.reset();return new ub(p(0))}da(a){this.g.da(a.s,h(a.h).map(b=>Oa(b.j())));return new yb(p(0))}ea(a){this.g.ea(a.s,h(a.h).map(b=>Oa(b.j())));return new Ab(p(0))}fa(a){this.g.fa(a.i,w(a.g,2)?a.h:void 0);return new Cb(p(0))}});var Dd=class{constructor(a){this.g=a}W(a){a=new db(v(a,0));return this.g.W(a).j()}};Dd.prototype.getCurrentPlaybackPositionSeconds=Dd.prototype.W;Dd.wrap=function(a){return new Dd(a)};f("MediaFetchCallbacksNativeHandler",Dd);var R=class{constructor(a){this.g=a}V(a){a=new fb(v(a,0));return this.g.V(a).j()}R(a){a=new hb(v(a,1));return this.g.R(a).j()}ka(a){a=new jb(v(a,2));return this.g.ka(a).j()}};R.prototype.logToCtmp=R.prototype.ka;R.prototype.onBufferedToEof=R.prototype.R;R.prototype.getAbrState=R.prototype.V;R.wrap=function(a){return new R(a)};f("MediaFetchClipCallbacksNativeHandler",R);var S=class{constructor(a){this.g=a}K(a){a=new nb(v(a,3));return this.g.K(a).j()}ba(a){a=new lb(v(a,12));return this.g.ba(a).j()}ua(a){a=new vb(v(a,1));return this.g.ua(a).j()}ha(a){a=new rb(v(a,1));return this.g.ha(a).j()}reset(a){a=new tb(v(a,0));return this.g.reset(a).j()}L(a){a=new pb(v(a,0));return this.g.L(a).j()}da(a){a=new xb(v(a,2));return this.g.da(a).j()}ea(a){a=new zb(v(a,2));return this.g.ea(a).j()}fa(a){a=new Bb(v(a,2));return this.g.fa(a).j()}};S.prototype.setClipEndTime=S.prototype.fa;
S.prototype.setAllowedVideoFormats=S.prototype.ea;S.prototype.setAllowedAudioFormats=S.prototype.da;S.prototype.fetchLoop=S.prototype.L;S.prototype.reset=S.prototype.reset;S.prototype.transitionToQueuedClip=S.prototype.ha;S.prototype.seekTo=S.prototype.ua;S.prototype.queueVideoClip=S.prototype.ba;S.prototype.initialize=S.prototype.K;S.wrap=function(a){return new S(a)};f("MediaFetchControllerNativeHandler",S);var T=class{constructor(a){this.i=a;this.g=Ed[this.i];this.g||(this.g=native_getMethodIDs(this.i,"initialize queueVideoClip seekTo transitionToQueuedClip reset fetchLoop setAllowedAudioFormats setAllowedVideoFormats setClipEndTime".split(" ")),Ed[this.i]=this.g)}B(a){this.h=native_instantiateHandler(this.i,a);return a}G(){native_terminateHandler(this.h);this.h=void 0}K(a){return new ob(v(native_callMethod(this.g.initialize,this.h,a.j()),0))}ba(a){return new mb(v(native_callMethod(this.g.queueVideoClip,
this.h,a.j()),0))}ua(a){return new wb(v(native_callMethod(this.g.seekTo,this.h,a.j()),0))}ha(a){return new sb(v(native_callMethod(this.g.transitionToQueuedClip,this.h,a.j()),0))}reset(a){return new ub(v(native_callMethod(this.g.reset,this.h,a.j()),0))}L(a){return new qb(v(native_callMethod(this.g.fetchLoop,this.h,a.j()),0))}da(a){return new yb(v(native_callMethod(this.g.setAllowedAudioFormats,this.h,a.j()),0))}ea(a){return new Ab(v(native_callMethod(this.g.setAllowedVideoFormats,this.h,a.j()),0))}fa(a){return new Cb(v(native_callMethod(this.g.setClipEndTime,
this.h,a.j()),0))}};T.prototype.setClipEndTime=T.prototype.fa;T.prototype.setAllowedVideoFormats=T.prototype.ea;T.prototype.setAllowedAudioFormats=T.prototype.da;T.prototype.fetchLoop=T.prototype.L;T.prototype.reset=T.prototype.reset;T.prototype.transitionToQueuedClip=T.prototype.ha;T.prototype.seekTo=T.prototype.ua;T.prototype.queueVideoClip=T.prototype.ba;T.prototype.initialize=T.prototype.K;T.prototype.terminateWrapper=T.prototype.G;T.prototype.setInstance=T.prototype.B;var Ed={};
f("MediaFetchControllerNativeWrapper",T);var U=class{constructor(a){this.g=a}K(a){a=new Db(v(a,1));return this.g.K(a).j()}S(a){a=new Fb(v(a,5));return this.g.S(a).j()}aa(a){a=new Hb(v(a,2));return this.g.aa(a).j()}};U.prototype.onPushComplete=U.prototype.aa;U.prototype.pushMedia=U.prototype.S;U.prototype.initialize=U.prototype.K;U.wrap=function(a){return new U(a)};f("MediaParsersNativeHandler",U);var V=class{constructor(a){this.g=a}$(a){a=new Jb(v(a,3));return this.g.$(a).j()}ra(a){a=new Lb(v(a,0));return this.g.ra(a).j()}};V.prototype.onError=V.prototype.ra;V.prototype.onParse=V.prototype.$;V.wrap=function(a){return new V(a)};f("MediaParsersListenerNativeHandler",V);var W=class{constructor(a){this.h=a;this.g=Fd[this.h];this.g||(this.g=native_getMethodIDs(this.h,["onParse","onError"]),Fd[this.h]=this.g)}B(a){this.i=native_instantiateHandler(this.h,a);return a}G(){native_terminateHandler(this.i);this.i=void 0}$(a){return new Kb(v(native_callMethod(this.g.onParse,this.i,a.j()),0))}ra(a){return new Mb(v(native_callMethod(this.g.onError,this.i,a.j()),0))}};W.prototype.onError=W.prototype.ra;W.prototype.onParse=W.prototype.$;W.prototype.terminateWrapper=W.prototype.G;
W.prototype.setInstance=W.prototype.B;var Fd={};f("MediaParsersListenerNativeWrapper",W);var X=class{constructor(a){this.g=a}seek(a){a=new Nb(v(a,1));return this.g.seek(a).j()}U(a){a=new Pb(v(a,1));return this.g.U(a).j()}ja(a){a=new Rb(v(a,2));return this.g.ja(a).j()}};X.prototype.discardRange=X.prototype.ja;X.prototype.discardBuffer=X.prototype.U;X.prototype.seek=X.prototype.seek;X.wrap=function(a){return new X(a)};f("MediaSinkNativeHandler",X);var Gd=class{constructor(a){this.g=a}ga(a){a=new Vb(v(a,7));return this.g.ga(a).j()}qa(a){a=new Xb(v(a,1));return this.g.qa(a).j()}};Gd.prototype.cancelFetch=Gd.prototype.qa;Gd.prototype.startFetch=Gd.prototype.ga;Gd.wrap=function(a){return new Gd(a)};f("NetworkClientNativeHandler",Gd);var Y=class{constructor(a){this.g=a}Z(a){a=new Zb(v(a,4));return this.g.Z(a).j()}la(a){a=new ac(v(a,3));return this.g.la(a).j()}X(a){a=new cc(v(a,1));return this.g.X(a).j()}Y(a){a=new ec(v(a,2));return this.g.Y(a).j()}};Y.prototype.netFailed=Y.prototype.Y;Y.prototype.netDone=Y.prototype.X;Y.prototype.netPushHttpResponse=Y.prototype.la;Y.prototype.netPush=Y.prototype.Z;Y.wrap=function(a){return new Y(a)};f("NetworkClientCallbackNativeHandler",Y);var Z=class{constructor(a){this.i=a;this.g=Hd[this.i];this.g||(this.g=native_getMethodIDs(this.i,["netPush","netPushHttpResponse","netDone","netFailed"]),Hd[this.i]=this.g)}B(a){this.h=native_instantiateHandler(this.i,a);return a}G(){native_terminateHandler(this.h);this.h=void 0}Z(a){return new $b(v(native_callMethod(this.g.netPush,this.h,a.j()),0))}la(a){return new bc(v(native_callMethod(this.g.netPushHttpResponse,this.h,a.j()),0))}X(a){return new dc(v(native_callMethod(this.g.netDone,this.h,a.j()),
0))}Y(a){return new fc(v(native_callMethod(this.g.netFailed,this.h,a.j()),0))}};Z.prototype.netFailed=Z.prototype.Y;Z.prototype.netDone=Z.prototype.X;Z.prototype.netPushHttpResponse=Z.prototype.la;Z.prototype.netPush=Z.prototype.Z;Z.prototype.terminateWrapper=Z.prototype.G;Z.prototype.setInstance=Z.prototype.B;var Hd={};f("NetworkClientCallbackNativeWrapper",Z);var Ld=class{constructor(a){this.g=a}T(a){a=new gc(v(a,2));return this.g.T(a).j()}ma(a){a=new ic(v(a,1));return this.g.ma(a).j()}};Ld.prototype.releaseNetworkClient=Ld.prototype.ma;Ld.prototype.createNetworkClient=Ld.prototype.T;Ld.wrap=function(a){return new Ld(a)};f("NetworkClientFactoryNativeHandler",Ld);
